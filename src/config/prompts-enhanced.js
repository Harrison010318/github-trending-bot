// å¢å¼ºå‹æç¤ºè¯ - åŸºäºä»“åº“è¯¦ç»†ä¿¡æ¯ç”Ÿæˆæ›´å…¨é¢çš„æŠ¥å‘Š
module.exports = {
  // åŸå§‹çš„ç®€å•æç¤ºè¯
  htmlReport: (projectsText) => `
ä½ æ˜¯ä¸€ä½èµ„æ·±çš„å¼€å‘è€…å’ŒæŠ€æœ¯å†…å®¹ä¸“å®¶ã€‚ç°åœ¨æˆ‘éœ€è¦ä½ å°†ä»¥ä¸‹ä»Šå¤©çš„ GitHub Trending æ¦œå•æ•°æ®è½¬æ¢ä¸ºä¸€ä»½ä¸“ä¸šçš„ã€é«˜è´¨é‡çš„ HTML æ—¥æŠ¥ã€‚

ã€æ•°æ®ã€‘
${projectsText}

ã€å…·ä½“è¦æ±‚ã€‘

1. ã€æ•´ä½“å¸ƒå±€ã€‘
   - åˆ›å»ºä¸€ä¸ªå“åº”å¼çš„ã€é€‚åˆé‚®ä»¶é˜…è¯»çš„ HTML é¡µé¢
   - ä½¿ç”¨ç°ä»£çš„è®¾è®¡é£æ ¼ï¼Œé…è‰²æ–¹æ¡ˆä¸ºæ·±è“/é’è‰²ä¸»é¢˜
   - é¡µé¢å®½åº¦ä¸º 600pxï¼ˆé‚®ä»¶æ ‡å‡†å®½åº¦ï¼‰ï¼Œæ‰€æœ‰æ ·å¼ä½¿ç”¨å†…è” CSS

2. ã€é¡µé¢ç»“æ„ã€‘
   - é¡¶éƒ¨ï¼šæ—¥æœŸæ ‡é¢˜å’Œå‰¯æ ‡é¢˜ï¼ˆ"GitHub Trending Daily Report"ï¼‰
   - ä¸­é—´ï¼šé¡¹ç›®å¡ç‰‡åˆ—è¡¨ï¼ˆæŒ‰æ’åæ˜¾ç¤ºï¼‰
   - åº•éƒ¨ï¼šç»Ÿè®¡æ‘˜è¦å’Œè®¢é˜…ä¿¡æ¯

3. ã€é¡¹ç›®å¡ç‰‡æ ·å¼ã€‘
   - æ¯ä¸ªé¡¹ç›®ä½¿ç”¨å¡ç‰‡å¼è®¾è®¡ï¼Œå¡ç‰‡é—´æœ‰æ˜æ˜¾çš„è§†è§‰åˆ†éš”
   - å¡ç‰‡èƒŒæ™¯ä¸ºç™½è‰²ï¼Œé˜´å½±æ•ˆæœï¼Œåœ†è§’è®¾è®¡
   - æ’åå·ä½¿ç”¨å½©è‰²åœ†å½¢å¾½ç« ï¼ˆ#FF6B6Bã€#4ECDC4ã€#45B7D1 ç­‰å¾ªç¯ï¼‰

4. ã€æ¯å¼ å¡ç‰‡çš„å†…å®¹ç»“æ„ã€‘
   æ’åå· + é¡¹ç›®åç§°ï¼ˆè“è‰²å¯ç‚¹å‡»é“¾æ¥ï¼‰
   â”œâ”€ ğŸ“Š æ ¸å¿ƒäº®ç‚¹ï¼ˆ2-3 å¥è¯ï¼Œæ€»ç»“ä¸ºä»€ä¹ˆè¿™ä¸ªé¡¹ç›®åœ¨ Trending ä¸­è„±é¢–è€Œå‡ºï¼‰
   â”œâ”€ ğŸ“ é¡¹ç›®æè¿°ï¼ˆåŸå§‹æè¿°ï¼‰
   â”œâ”€ ğŸ› ï¸ æŠ€æœ¯æ ˆï¼ˆä¸»è¦ç¼–ç¨‹è¯­è¨€ï¼‰
   â”œâ”€ â­ Stars ç»Ÿè®¡ï¼ˆæ€»æ•° + ä»Šæ—¥æ–°å¢ï¼Œç”¨é†’ç›®çš„æ•°å­—çªå‡ºæ˜¾ç¤ºï¼‰
   â””â”€ ğŸ”— GitHub é“¾æ¥

5. ã€äº®ç‚¹æ€»ç»“çš„æ™ºèƒ½åˆ†æã€‘
   å¯¹äºæ¯ä¸ªé¡¹ç›®ï¼Œæ ¹æ®å…¶æè¿°ã€è¯­è¨€ã€Stars å¢é•¿æ•°æ®ï¼Œåˆ†æå‡ºå…¶æ ¸å¿ƒç«äº‰åŠ›ï¼Œä¾‹å¦‚ï¼š
   - å¦‚æœæ˜¯ AI/ML ç›¸å…³ï¼šå¼ºè°ƒæŠ€æœ¯åˆ›æ–°å’Œåº”ç”¨ä»·å€¼
   - å¦‚æœ Stars å¢é•¿å¿«ï¼šå¼ºè°ƒç¤¾åŒºçƒ­åº¦å’Œå®ç”¨ä»·å€¼
   - å¦‚æœæ˜¯å·¥å…·ç±»ï¼šå¼ºè°ƒè§£å†³çš„å®é™…é—®é¢˜
   - å¦‚æœæ˜¯æ¡†æ¶ç±»ï¼šå¼ºè°ƒå¼€å‘æ•ˆç‡æå‡

6. ã€é¢œè‰²å’Œæ’ç‰ˆã€‘
   - ä½¿ç”¨æ¸å˜è‰²èƒŒæ™¯ï¼ˆæµ…ç°åˆ°ç™½è‰²ï¼‰
   - æ ‡é¢˜ä½¿ç”¨æ·±è“è‰²ï¼ˆ#1F3A5Fï¼‰
   - é“¾æ¥ä½¿ç”¨é’è‰²ï¼ˆ#4ECDC4ï¼‰
   - æ•°å­—ä½¿ç”¨é²œè‰³é¢œè‰²çªå‡ºï¼ˆå¦‚ #FF6B6Bï¼‰
   - ä½¿ç”¨ä¸åŒçš„å­—ä½“å¤§å°å’Œç²—ç»†æ¥å»ºç«‹è§†è§‰å±‚çº§

7. ã€ä¿¡æ¯å¯†åº¦ã€‘
   - æ¯ä¸ªå¡ç‰‡ä¿¡æ¯å®Œæ•´ä½†ä¸å†—é•¿
   - ä½¿ç”¨å›¾æ ‡æˆ–ç¬¦å·å¿«é€Ÿè¯†åˆ«ä¸åŒçš„ä¿¡æ¯ç±»å‹
   - å…³é”®æ•°æ®ï¼ˆStarsã€ä»Šæ—¥å¢é•¿ï¼‰å¿…é¡»æ¸…æ™°å¯è§

8. ã€é‚®ä»¶å‹å¥½æ€§ã€‘
   - æ‰€æœ‰æ ·å¼å¿…é¡»å…¼å®¹ Gmailã€Outlook ç­‰é‚®ä»¶å®¢æˆ·ç«¯
   - ä¸ä½¿ç”¨å¤–éƒ¨ JavaScript æˆ–åª’ä½“æŸ¥è¯¢
   - ä½¿ç”¨ Web-safe å­—ä½“ï¼ˆArial, Helvetica, sans-serif ç­‰ï¼‰
   - ç¡®ä¿æ–‡æœ¬å¯¹æ¯”åº¦è¶³å¤Ÿé«˜

9. ã€æœ€åçš„æ€»ç»“åŒºåŸŸã€‘
   - åœ¨æ‰€æœ‰é¡¹ç›®ä¸‹æ–¹æ·»åŠ ä¸€ä¸ªç»Ÿè®¡æ‘˜è¦ï¼š
     * æœ¬æ—¥å…±æŠ“å– X ä¸ªçƒ­é—¨é¡¹ç›®
     * Stars æœ€å¤šçš„é¡¹ç›®
     * ä»Šæ—¥å¢é•¿æœ€å¿«çš„é¡¹ç›®
     * æ¶µç›–çš„ä¸»è¦æŠ€æœ¯é¢†åŸŸ

10. ã€è¯­è¨€ã€‘
    å…¨éƒ¨ä½¿ç”¨ä¸­æ–‡è¾“å‡ºï¼Œè¡¨è¾¾ä¸“ä¸šã€å‡†ç¡®ã€æœ‰å¸å¼•åŠ›ã€‚

è¯·ç”Ÿæˆå®Œæ•´çš„ HTML ä»£ç ï¼Œç¡®ä¿ä»£ç å¯ä»¥ç›´æ¥åœ¨é‚®ä»¶ä¸­æ¸²æŸ“ï¼Œå±•ç¤ºå‡ºä¸“ä¸šã€ç¾è§‚ã€ä¿¡æ¯ä¸°å¯Œçš„æ•ˆæœã€‚
`,

  // å¢å¼ºå‹æç¤ºè¯ - éœ€è¦è®¿é—®ä»“åº“è·å–è¯¦ç»†ä¿¡æ¯
  enhancedReport: (projectsText, repositoryDetails) => `
ä½ æ˜¯ä¸€ä½èµ„æ·±çš„å¼€å‘è€…å’ŒæŠ€æœ¯å†…å®¹ä¸“å®¶ã€‚ç°åœ¨æˆ‘éœ€è¦ä½ åŸºäºä»¥ä¸‹ä¿¡æ¯ï¼Œç”Ÿæˆä¸€ä»½é«˜è´¨é‡çš„ GitHub Trending æ—¥æŠ¥ã€‚

ã€åŸºç¡€é¡¹ç›®ä¿¡æ¯ã€‘
${projectsText}

ã€ä»“åº“è¯¦ç»†ä¿¡æ¯ã€‘
${formatRepositoryDetails(repositoryDetails)}

ã€ä»»åŠ¡è¦æ±‚ã€‘

ä½ éœ€è¦ç»¼åˆä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼Œç”Ÿæˆä¸“ä¸šçš„ HTML æ—¥æŠ¥ã€‚é‡ç‚¹è¦æ±‚ï¼š

1. ã€å†…å®¹æ·±åº¦ã€‘
   - ä¸ä»…å±•ç¤ºé¡¹ç›®çš„åŸºæœ¬ä¿¡æ¯ï¼ˆåç§°ã€Star æ•°ï¼‰ï¼Œæ›´è¦å±•ç¤ºé¡¹ç›®çš„çœŸå®ä»·å€¼
   - åˆ©ç”¨ä»“åº“è¯¦æƒ…ä¸­çš„ README æ‘˜è¦ã€ç‰¹æ€§åˆ—è¡¨ï¼Œæä¾›æ›´æ·±å…¥çš„é¡¹ç›®ç†è§£
   - åˆ†æé¡¹ç›®çš„å®é™…åº”ç”¨åœºæ™¯å’Œå¸‚åœºä»·å€¼

2. ã€åˆ†ç±»å’Œæ´å¯Ÿã€‘
   - å°†é¡¹ç›®è¿›è¡Œæ™ºèƒ½åˆ†ç±»ï¼ˆå¦‚ AI/MLã€å¼€å‘å·¥å…·ã€æ¡†æ¶ç­‰ï¼‰
   - åˆ†æé¡¹ç›®é—´çš„è”ç³»å’Œå‘å±•è¶‹åŠ¿
   - æŒ‡å‡ºå“ªäº›é¡¹ç›®æ˜¯ä¸šç•Œæ–°è¶‹åŠ¿çš„ä½“ç°

3. ã€é¡¹ç›®æ ¸å¿ƒç‰¹å¾ã€‘
   æ¯ä¸ªé¡¹ç›®éœ€è¦çªå‡ºï¼š
   - ğŸ¯ é¡¹ç›®ç›®æ ‡å’Œè§£å†³çš„é—®é¢˜
   - ğŸ’¡ æ ¸å¿ƒåˆ›æ–°ç‚¹
   - ğŸš€ ä¸»è¦ç‰¹æ€§å’ŒåŠŸèƒ½
   - ğŸ“Š å‘å±•çƒ­åº¦ï¼ˆStars å¢é€Ÿï¼‰
   - ğŸ”§ æŠ€æœ¯æ ˆç‰¹ç‚¹
   - ğŸ‘¥ ç¤¾åŒºæ´»è·ƒåº¦ï¼ˆè´¡çŒ®è€…æ•°ï¼‰

4. ã€HTML æŠ¥å‘Šæ ¼å¼ã€‘
   - å“åº”å¼è®¾è®¡ï¼Œé‚®ä»¶ä¼˜åŒ–
   - æ·±è“/é’è‰²ä¸»é¢˜ï¼Œä¸“ä¸šç¾è§‚
   - é¡µé¢å®½åº¦ 600pxï¼Œå†…è” CSS
   - å½©è‰²å¡ç‰‡è®¾è®¡ï¼Œæ¸…æ™°çš„è§†è§‰å±‚çº§
   - å®Œæ•´çš„ç»Ÿè®¡æ‘˜è¦å’Œè¡Œä¸šæ´å¯Ÿ

5. ã€æŠ¥å‘Šç»“æ„ã€‘
   - ğŸ“… æ—¥æœŸå’Œä¸»é¢˜å¼•è¨€ï¼ˆä»‹ç»ä»Šæ—¥çš„ä¸»è¦è¶‹åŠ¿ï¼‰
   - ğŸ” Top 5 é¡¹ç›®äº®ç‚¹ï¼ˆæœ€å€¼å¾—å…³æ³¨çš„é¡¹ç›®ï¼‰
   - ğŸ“Š é¡¹ç›®åˆ†ç±»å±•ç¤ºï¼ˆæŒ‰ç±»å‹ã€è¯­è¨€ã€åº”ç”¨åœºæ™¯åˆ†ç»„ï¼‰
   - ğŸš€ æ–°å…´è¶‹åŠ¿åˆ†æï¼ˆåŸºäºæ‰€æœ‰é¡¹ç›®çš„æ•´ä½“è¶‹åŠ¿ï¼‰
   - ğŸ’¬ å¼€å‘è€…æ´å¯Ÿï¼ˆå¯¹å¼€å‘è€…ç¤¾åŒºçš„å¯ç¤ºï¼‰
   - ğŸ”— å®Œæ•´é¡¹ç›®åˆ—è¡¨ï¼ˆåŒ…å«æ‰€æœ‰è¯¦ç»†ä¿¡æ¯ï¼‰

6. ã€è¯­è¨€å’Œé£æ ¼ã€‘
   - ä¸­æ–‡è¾“å‡ºï¼Œè¡¨è¾¾ä¸“ä¸šä¸¥è°¨
   - çªå‡ºæ•°æ®å’Œäº‹å®ï¼Œé¿å…è¿‡åº¦ä¿®è¾
   - ä½¿ç”¨æ¸…æ™°çš„é€»è¾‘ç»“æ„å’Œå±‚çº§

7. ã€é‚®ä»¶å‹å¥½æ€§ã€‘
   - Gmailã€Outlook ç­‰é‚®ä»¶å®¢æˆ·ç«¯å®Œå…¨å…¼å®¹
   - æ‰€æœ‰æ ·å¼ä½¿ç”¨å†…è” CSS
   - Web-safe å­—ä½“ï¼ˆArialã€Helvetica ç­‰ï¼‰
   - è¶³å¤Ÿçš„æ–‡æœ¬å¯¹æ¯”åº¦ï¼Œæ˜“äºé˜…è¯»

ã€è¾“å‡ºè¦æ±‚ã€‘
ç”Ÿæˆå®Œæ•´çš„ HTML ä»£ç ï¼Œå¯ä»¥ç›´æ¥åœ¨é‚®ä»¶ä¸­æ¸²æŸ“ã€‚ä½“ç°ä¸“ä¸šæ€§ã€ä¿¡æ¯ä¸°å¯Œæ€§å’Œè§†è§‰ç¾è§‚æ€§ã€‚
`,

  // å®æ—¶åˆ†æç‰ˆæœ¬ - ç”¨äºç”Ÿæˆæ›´æ·±å…¥çš„åˆ†ææŠ¥å‘Š
  insightfulReport: (projectsText, repositoryDetails) => `
ä½ æ˜¯ä¸€ä½ GitHub è¶‹åŠ¿åˆ†æä¸“å®¶ï¼Œä¸“æ³¨äºå‘ç°å’Œè§£è¯»å¼€æºé¡¹ç›®çš„å‘å±•åŠ¨å‘ã€‚

ã€é¡¹ç›®æ•°æ®ã€‘
${projectsText}

ã€ä»“åº“è¯¦æƒ…ã€‘
${formatRepositoryDetails(repositoryDetails)}

ã€åˆ†æä»»åŠ¡ã€‘

è¯·ç”Ÿæˆä¸€ä»½æ·±åº¦åˆ†ææŠ¥å‘Šï¼ŒåŒ…å«ä»¥ä¸‹å†…å®¹ï¼š

1. ã€ä»Šæ—¥ä¸»é¢˜è¯†åˆ«ã€‘
   - è¯†åˆ«æ‰€æœ‰é¡¹ç›®ä¸­çš„å…±åŒä¸»é¢˜å’Œè¶‹åŠ¿
   - åˆ†æèƒŒåçš„æŠ€æœ¯é©±åŠ¨åŠ›
   - é¢„æµ‹å¯èƒ½çš„åç»­å‘å±•æ–¹å‘

2. ã€é¡¹ç›®åˆ†å±‚åˆ†æã€‘
   å°†é¡¹ç›®åˆ†ä¸ºå‡ ä¸ªå±‚çº§ï¼š
   - ğŸŒŸ è¶…çº§æ˜æ˜Ÿé¡¹ç›®ï¼ˆToday Stars > 500ï¼‰
   - â­ çƒ­é—¨é¡¹ç›®ï¼ˆToday Stars 100-500ï¼‰
   - ğŸ“ˆ æ–°æ™‹é¡¹ç›®ï¼ˆä»Šæ—¥é¦–æ¬¡ä¸Šæ¦œæˆ–å¿«é€Ÿå¢é•¿ï¼‰
   - ğŸ”§ å®ç”¨å·¥å…·ï¼ˆé¢å‘å¼€å‘è€…çš„å·¥å…·ç±»é¡¹ç›®ï¼‰

3. ã€æŠ€æœ¯ç”Ÿæ€è§‚å¯Ÿã€‘
   - ä¸»æµç¼–ç¨‹è¯­è¨€åŠå…¶åº”ç”¨é¢†åŸŸ
   - æ¡†æ¶å’Œåº“çš„å‘å±•æ–¹å‘
   - åŸºç¡€è®¾æ–½å’Œå·¥å…·çš„æ¼”è¿›

4. ã€ä»·å€¼è¯„ä¼°ã€‘
   å¯¹æ¯ä¸ªé¡¹ç›®è¿›è¡Œå¤šç»´åº¦è¯„ä¼°ï¼š
   - ğŸ¯ æŠ€æœ¯ä»·å€¼ï¼šåˆ›æ–°ç¨‹åº¦ã€è§£å†³çš„æ ¸å¿ƒé—®é¢˜
   - ğŸ“Š å¸‚åœºä»·å€¼ï¼šå®ç”¨æ€§ã€é€‚ç”¨åœºæ™¯ã€æ½œåœ¨ç”¨æˆ·
   - ğŸš€ å¢é•¿æ½œåŠ›ï¼šStars å¢é€Ÿã€æ´»è·ƒåº¦ã€ç¤¾åŒºè§„æ¨¡
   - ğŸŒ å½±å“åŠ›ï¼šåœ¨ä¸šç•Œçš„åœ°ä½å’Œå½±å“èŒƒå›´

5. ã€è¡Œä¸šæ´å¯Ÿã€‘
   - å½“å‰å¼€æºç¤¾åŒºçš„çƒ­ç‚¹æ–¹å‘
   - æŠ€æœ¯é€‰å‹çš„æ–°è¶‹åŠ¿
   - å¯¹å¼€å‘è€…èŒä¸šå‘å±•çš„å¯ç¤º

6. ã€HTML å¯è§†åŒ–ã€‘
   - åˆ›æ„åè¶³çš„å¡ç‰‡è®¾è®¡
   - æ•°æ®å¯è§†åŒ–å…ƒç´ ï¼ˆç®€å•çš„å›¾è¡¨/æŒ‡æ ‡ï¼‰
   - æ¸…æ™°çš„åˆ†ç±»å’Œå¯¼èˆª
   - æ˜“äºæ‰«æå’Œé˜…è¯»çš„å¸ƒå±€

ã€è¾“å‡ºæ ¼å¼ã€‘
å®Œæ•´çš„ HTML æŠ¥å‘Šï¼Œå¯ç›´æ¥åœ¨é‚®ä»¶ä¸­æ˜¾ç¤ºï¼Œå…¼å®¹ä¸»æµé‚®ä»¶å®¢æˆ·ç«¯ã€‚
`
};

/**
 * æ ¼å¼åŒ–ä»“åº“è¯¦ç»†ä¿¡æ¯ä¸ºæ–‡æœ¬
 */
function formatRepositoryDetails(detailsList) {
  if (!detailsList || detailsList.length === 0) {
    return 'ï¼ˆæš‚æ— ä»“åº“è¯¦æƒ…ï¼‰';
  }
  
  return detailsList
    .filter(d => d !== null)
    .map((detail, index) => `
ã€ä»“åº“ ${index + 1}ã€‘
åç§°: ${detail.fullName}
æè¿°: ${detail.description || 'æ— '}
Topics: ${detail.topics.join(', ') || 'æ— '}
æ˜¯å¦å½’æ¡£: ${detail.isArchived ? 'æ˜¯' : 'å¦'}
æœ€åæ›´æ–°: ${detail.lastUpdated}
è´¡çŒ®è€…: ${detail.contributorsCount}
ç‰¹æ€§: ${detail.features.join('; ') || 'æ— '}
README æ‘˜è¦: ${detail.readmeExcerpt || 'æ— '}
`)
    .join('\n');
}

module.exports.formatRepositoryDetails = formatRepositoryDetails;
